# Warp workflows for SSH with tmux
name: SSH Workflows
workflows:
  - name: SSH with tmux
    command: ssh {{host}} -t "tmux attach || tmux new -s main"
    description: Connect to host and attach/create tmux session
    placeholders:
      - name: host
        description: Hostname or IP

  - name: SSH with named session
    command: ssh {{host}} -t "tmux attach -t {{session}} || tmux new -s {{session}}"
    description: SSH with specific tmux session name
    placeholders:
      - name: host
        description: Hostname or IP
      - name: session
        description: Session name
        default: main

  - name: SSH project session
    command: |
      ssh {{host}} -t "cd {{project_path}} && tmux new-session -s {{project_name}} -c {{project_path}} || tmux attach -t {{project_name}}"
    description: SSH and create project-specific tmux session
    placeholders:
      - name: host
        description: Hostname or IP
      - name: project_path
        description: Path to project
        default: ~/projects
      - name: project_name
        description: Project name for session

  - name: Mosh with tmux
    command: mosh {{host}} -- tmux attach || tmux new -s main
    description: Use mosh for poor connections
    placeholders:
      - name: host
        description: Hostname or IP

  - name: SSH tunnel
    command: ssh -L {{local_port}}:localhost:{{remote_port}} {{host}} -N
    description: Create SSH tunnel
    placeholders:
      - name: local_port
        description: Local port
        default: 8080
      - name: remote_port
        description: Remote port
        default: 80
      - name: host
        description: Hostname or IP